<html>
<body>
	<p>Paste a Base-64 encoded image below</p>
	<input id="inputBox" type="text"/>
	<button id="submitBtn">Annotate this image</button>

	<br />
	<br />
	<div id="content"></div>

	<br />
	<a id="downloadLink" style="visibility:hidden" href="#">Download As Image</a>
	<p id="error" style="visibility:hidden;color:red">Not an image or encoded incorrectly</p>

	<script rel="text/javascript" src="$JS_LIBRARY"></script>

	<script>

		function show(id) {
            document.getElementById(id).style.visibility = 'visible';
		}
        function hide(id) {
            document.getElementById(id).style.visibility = 'hidden';
        }

        window.onload = function () {

            document.getElementById('submitBtn').onclick = function (event) {
                var value = document.getElementById('inputBox').value;
                document.getElementById('content').innerHTML = ''; //Remove all children
                window["canvas-annotation-lib"].annotateAsPromise(value).then(function(canvasElement)  {
					document.getElementById('content').appendChild(canvasElement);
					show('downloadLink');
					hide('error');
				})
				.catch(function() {
				    show('error')
				});
            };
            document.getElementById('downloadLink').onclick = function (event) {
                event.target.href =  document.getElementById('content').children[0].getAnnotatedImageAsBase64String();
                event.target.download = "AnnotatedImage.png"
            };
        };
	</script>
</body>
</html>